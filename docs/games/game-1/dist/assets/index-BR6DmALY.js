var e=Object.defineProperty,t=(t,a,s)=>(((t,a,s)=>{a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s})(t,"symbol"!=typeof a?a+"":a,s),s);import{P as a}from"./phaser-CmFXOKba.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();class s extends a.Scene{constructor(){super({key:"Preloader"})}preload(){this.load.setPath("assets/"),this.load.image("volume-icon","ui/volume-icon.png"),this.load.image("volume-icon_off","ui/volume-icon_off.png"),this.load.audio("theme-song","audio/fat-caps-audionatix.mp3"),this.load.audio("whoosh","audio/whoosh.mp3"),this.load.audio("card-flip","audio/card-flip.mp3"),this.load.audio("card-match","audio/card-match.mp3"),this.load.audio("card-mismatch","audio/card-mismatch.mp3"),this.load.audio("card-slide","audio/card-slide.mp3"),this.load.audio("victory","audio/victory.mp3"),this.load.image("background"),this.load.image("card-back","cards/card-back.png"),this.load.image("card-0","cards/card-0.png"),this.load.image("card-1","cards/card-1.png"),this.load.image("card-2","cards/card-2.png"),this.load.image("card-3","cards/card-3.png"),this.load.image("card-4","cards/card-4.png"),this.load.image("card-5","cards/card-5.png"),this.load.image("heart","ui/heart.png")}create(){this.scene.start("Play")}}class i extends a.Scene{constructor(){super({key:"Play"}),t(this,"cardNames",["card-0","card-1","card-2","card-3","card-4","card-5"]),t(this,"cards",[]),t(this,"cardOpened"),t(this,"canMove",!1),t(this,"lives",0),t(this,"gridConfiguration",{x:113,y:102,paddingX:10,paddingY:10})}init(){this.cameras.main.fadeIn(500),this.lives=10,this.volumeButton()}create(){this.add.image(this.gridConfiguration.x-63,this.gridConfiguration.y-77,"background").setOrigin(0);const e=this.add.text(this.sys.game.scale.width/2,this.sys.game.scale.height/2,"Memory Card Game\nClick to Play",{align:"center",strokeThickness:4,fontSize:40,fontStyle:"bold",color:"#8c7ae6"}).setOrigin(.5).setDepth(3).setInteractive();this.add.tween({targets:e,duration:800,ease:e=>e>.8,alpha:0,repeat:-1,yoyo:!0}),e.on(a.Input.Events.POINTER_OVER,(()=>{e.setColor("#9c88ff"),this.input.setDefaultCursor("pointer")})),e.on(a.Input.Events.POINTER_OUT,(()=>{e.setColor("#8c7ae6"),this.input.setDefaultCursor("default")})),e.on(a.Input.Events.POINTER_DOWN,(()=>{this.sound.play("whoosh",{volume:1.3}),this.add.tween({targets:e,ease:a.Math.Easing.Bounce.InOut,y:-1e3,onComplete:()=>{this.sound.get("theme-song")||this.sound.play("theme-song",{loop:!0,volume:.5}),this.startGame()}})}))}restartGame(){this.cardOpened=void 0,this.cameras.main.fadeOut(200*this.cards.length),this.cards.reverse().map(((e,t)=>{this.add.tween({targets:e.gameObject,duration:500,y:1e3,delay:100*t,onComplete:()=>{e.gameObject.destroy()}})})),this.time.addEvent({delay:200*this.cards.length,callback:()=>{this.cards=[],this.canMove=!1,this.scene.restart(),this.sound.play("card-slide",{volume:1.2})}})}createGridCards(){return a.Utils.Array.Shuffle([...this.cardNames,...this.cardNames]).map(((e,t)=>{const a=(({scene:e,x:t,y:a,frontTexture:s,cardName:i})=>{let o=!1;const n={y:0},r="card-back",d=e.add.plane(t,a,r).setName(i).setInteractive();return d.modelRotationY=180,{gameObject:d,flip:t=>{o||e.add.tween({targets:[n],y:180===n.y?0:180,ease:Phaser.Math.Easing.Expo.Out,duration:500,onStart:()=>{o=!0,e.sound.play("card-flip"),e.tweens.chain({targets:d,ease:Phaser.Math.Easing.Expo.InOut,tweens:[{duration:200,scale:1.1},{duration:300,scale:1}]})},onUpdate:()=>{d.rotateY=180+n.y;const e=Math.floor(d.rotateY)%360;e>=0&&e<=90||e>=270&&e<=359?d.setTexture(s):d.setTexture(r)},onComplete:()=>{o=!1,t&&t()}})},destroy:()=>{e.add.tween({targets:[d],y:d.y-1e3,easing:Phaser.Math.Easing.Elastic.In,duration:500,onComplete:()=>{d.destroy()}})},cardName:i}})({scene:this,x:this.gridConfiguration.x+(98+this.gridConfiguration.paddingX)*(t%4),y:-1e3,frontTexture:e,cardName:e});return this.add.tween({targets:a.gameObject,duration:800,delay:100*t,onStart:()=>this.sound.play("card-slide",{volume:1.2}),y:this.gridConfiguration.y+(128+this.gridConfiguration.paddingY)*Math.floor(t/4)}),a}))}createHearts(){return Array.from(new Array(this.lives)).map(((e,t)=>{const s=this.add.image(this.sys.game.scale.width+1e3,20,"heart").setScale(2);return this.add.tween({targets:s,ease:a.Math.Easing.Expo.InOut,duration:1e3,delay:1e3+200*t,x:140+30*t}),s}))}volumeButton(){const e=this.add.image(25,25,"volume-icon").setName("volume-icon");e.setInteractive(),e.on(a.Input.Events.POINTER_OVER,(()=>{this.input.setDefaultCursor("pointer")})),e.on(a.Input.Events.POINTER_OUT,(()=>{console.log("Mouse leave"),this.input.setDefaultCursor("default")})),e.on(a.Input.Events.POINTER_DOWN,(()=>{0===this.sound.volume?(this.sound.setVolume(1),e.setTexture("volume-icon"),e.setAlpha(1)):(this.sound.setVolume(0),e.setTexture("volume-icon_off"),e.setAlpha(.5))}))}startGame(){const e=this.add.text(this.sys.game.scale.width/2,-1e3,"YOU WIN",{align:"center",strokeThickness:4,fontSize:40,fontStyle:"bold",color:"#8c7ae6"}).setOrigin(.5).setDepth(3).setInteractive(),t=this.add.text(this.sys.game.scale.width/2,-1e3,"GAME OVER\nClick to restart",{align:"center",strokeThickness:4,fontSize:40,fontStyle:"bold",color:"#ff0000"}).setName("gameOverText").setDepth(3).setOrigin(.5).setInteractive(),s=this.createHearts();this.cards=this.createGridCards(),this.time.addEvent({delay:200*this.cards.length,callback:()=>{this.canMove=!0}}),this.input.on(a.Input.Events.POINTER_MOVE,(e=>{this.canMove&&(this.cards.find((t=>t.gameObject.hasFaceAt(e.x,e.y)))?this.input.setDefaultCursor("pointer"):go[0]?"volume-icon"!==go[0].name&&this.input.setDefaultCursor("pointer"):this.input.setDefaultCursor("default"))})),this.input.on(a.Input.Events.POINTER_DOWN,(i=>{if(this.canMove&&this.cards.length){const o=this.cards.find((e=>e.gameObject.hasFaceAt(i.x,i.y)));if(o)if(this.canMove=!1,void 0!==this.cardOpened){if(this.cardOpened.gameObject.x===o.gameObject.x&&this.cardOpened.gameObject.y===o.gameObject.y)return this.canMove=!0,!1;o.flip((()=>{if(this.cardOpened.cardName===o.cardName)this.sound.play("card-match"),this.cardOpened.destroy(),o.destroy(),this.cards=this.cards.filter((e=>e.cardName!==o.cardName)),this.cardOpened=void 0,this.canMove=!0;else{this.sound.play("card-mismatch"),this.cameras.main.shake(600,.01);const e=s[s.length-1];this.add.tween({targets:e,ease:a.Math.Easing.Expo.InOut,duration:1e3,y:-1e3,onComplete:()=>{e.destroy(),s.pop()}}),this.lives-=1,o.flip(),this.cardOpened.flip((()=>{this.cardOpened=void 0,this.canMove=!0}))}0===this.lives&&(this.sound.play("whoosh",{volume:1.3}),this.add.tween({targets:t,ease:a.Math.Easing.Bounce.Out,y:this.sys.game.scale.height/2}),this.canMove=!1),0===this.cards.length&&(this.sound.play("whoosh",{volume:1.3}),this.sound.play("victory"),this.add.tween({targets:e,ease:a.Math.Easing.Bounce.Out,y:this.sys.game.scale.height/2}),this.canMove=!1)}))}else void 0===this.cardOpened&&this.lives>0&&this.cards.length>0&&(o.flip((()=>{this.canMove=!0})),this.cardOpened=o)}})),e.on(a.Input.Events.POINTER_OVER,(()=>{e.setColor("#FF7F50"),this.input.setDefaultCursor("pointer")})),e.on(a.Input.Events.POINTER_OUT,(()=>{e.setColor("#8c7ae6"),this.input.setDefaultCursor("default")})),e.on(a.Input.Events.POINTER_DOWN,(()=>{this.sound.play("whoosh",{volume:1.3}),this.add.tween({targets:e,ease:a.Math.Easing.Bounce.InOut,y:-1e3,onComplete:()=>{this.restartGame()}})})),t.on(a.Input.Events.POINTER_OVER,(()=>{t.setColor("#FF7F50"),this.input.setDefaultCursor("pointer")})),t.on(a.Input.Events.POINTER_OUT,(()=>{t.setColor("#8c7ae6"),this.input.setDefaultCursor("default")})),t.on(a.Input.Events.POINTER_DOWN,(()=>{this.add.tween({targets:t,ease:a.Math.Easing.Bounce.InOut,y:-1e3,onComplete:()=>{this.restartGame()}})}))}}const o={title:"Card Memory Game",type:a.AUTO,width:549,height:480,parent:"game-container",backgroundColor:"#192a56",pixelArt:!0,scale:{mode:a.Scale.FIT,autoCenter:a.Scale.CENTER_BOTH},scene:[s,i]};new a.Game(o);
